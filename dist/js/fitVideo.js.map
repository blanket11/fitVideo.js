{"version":3,"sources":["fitVideo.js"],"names":["FitVideo","target","options","$window","$","window","document","querySelectorAll","$video","params","self","viewSize","drowSize","extend","_loopHandler","i","length","item","video","getElementsByTagName","_setSize","_applySize","_setEvent","addEventListener","width","Math","ceil","clientWidth","height","clientHeight","scaleH","size","scaleW","sw","scale","dx","dy","marginHeight","dw","dh","marginWidth","style","marginTop","marginLeft","removeEventListener","_cancelEvent","_resetSize"],"mappings":"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","file":"fitVideo.js","sourcesContent":["class FitVideo {\n  constructor(target, options = null) {\n    this.$window = $(window);\n    this.target = document.querySelectorAll(target);\n    this.options = options;\n    this.$video = null;\n\n    this.params = {\n      self: null,\n      viewSize: {},\n      drowSize: { // 操作する設定値\n        'sw': 0,// 動画元サイズ横幅\n        'sh': 0,// 動画元サイズ縦幅\n        'dx': 0,// 配置位置 X軸\n        'dy': 0,// 配置位置 Y軸\n        'dw': 0,// 表示領域横幅\n        'dh': 0// 表示領域縦幅\n      }\n    };\n\n    this.options = $.extend({\n      'size': {\n        'width': 1280,\n        'height': 720\n      }\n    }, options);\n\n    this._loopHandler = () => {\n      for(let i = 0; i < this.target.length; i++) {\n        let item = this.target[i];\n        this.params.self = item;\n        this.video = item.getElementsByTagName('video');\n        this._setSize();\n        this._applySize();\n      }\n    };\n\n    this._setEvent();\n  }\n\n\n  /**\n  * イベントの設定\n  */\n  _setEvent() {\n    window.addEventListener('load', this._loopHandler);\n    window.addEventListener('resize', this._loopHandler);\n  }\n\n\n  /**\n  * サイズの取得\n  */\n  _setSize() {\n    let width = Math.ceil(this.params.self.clientWidth);\n    let height = Math.ceil(this.params.self.clientHeight);\n    let scaleH = height / this.options.size.height;\n    let scaleW = width / this.options.size.width;\n    this.params.viewSize = {\n      'width': width,\n      'height': height,\n      'scale': scaleH,\n      'marginWidth': ((this.options.size.width * scaleH) - width) / 2,\n      'marginHeight': ((this.options.size.height * scaleW) - height) / 2\n    };\n\n    // 動画サイズ設定\n    this.params.drowSize.sw = this.options.size.width;\n    this.params.drowSize.sw = this.options.size.height;\n\n    if (width > this.options.size.width * scaleH) {\n      this.params.viewSize.scale = scaleW;\n\n      this.params.drowSize.dx = 0;\n      this.params.drowSize.dy = -(this.params.viewSize.marginHeight);\n      this.params.drowSize.dw = this.params.viewSize.width;\n      this.params.drowSize.dh = this.options.size.height * this.params.viewSize.scale;\n    } else {\n      this.params.viewSize.scale = scaleH;\n\n      this.params.drowSize.dx = -(this.params.viewSize.marginWidth);\n      this.params.drowSize.dy = 0;\n      this.params.drowSize.dw = this.options.size.width * this.params.viewSize.scale;\n      this.params.drowSize.dh = this.params.viewSize.height;\n    }\n  }\n\n\n  /**\n  * videoタグにサイズのstyleをつける\n  */\n  _applySize() {\n    for(let i = 0; i < this.video.length; i ++){\n      let item = this.video[i];\n      item.style.width = this.params.drowSize.dw+'px';\n      item.style.height = this.params.drowSize.dh+'px';\n      item.style.marginTop = this.params.drowSize.dy+'px';\n      item.style.marginLeft = this.params.drowSize.dx+'px';\n    }\n  }\n\n\n  /**\n  * videoタグのstyleを解除\n  */\n  _resetSize() {\n    this.video = this.params.self.getElementsByTagName('video');\n    for(let i = 0; i < this.video.length; i ++){\n      let item = this.video[i];\n      item.style.width = '';\n      item.style.height = '';\n      item.style.marginTop = '';\n      item.style.marginLeft = '';\n    }\n  }\n\n\n  /**\n  * イベントを解除\n  */\n  _cancelEvent() {\n    window.removeEventListener('load', this._loopHandler);\n    window.removeEventListener('resize', this._loopHandler);\n  }\n\n\n  /**\n  * 解除処理\n  */\n  destroy() {\n    this._cancelEvent();\n    // ライブラリ側で設定したものを解除\n    for(let i = 0; i < this.target.length; i++){\n      let item = this.target[i];\n      this.params.self = item;\n      this.video = item.getElementsByTagName('video');\n      this._resetSize();\n    }\n  }\n}\n"]}